webpackJsonp([340],{1834:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function n(t){var e=t.baseFormData;return{statusFlg:e.status_flg,salesId:e.salesId,filter:e.fastquery,pageLength:t.pageSize,pageStart:t.currentPage}}var r=a(36),s=a.n(r),i=a(22),c=a.n(i),o=a(256),u=a.n(o),l=a(3113),p=a(489),d=a.n(p),f=a(3115),g=new f.a,_={namespace:"M01338010A031LT00101",state:l.a,subscriptions:{historyListenEvent:function(e){var a=e.history,n=e.dispatch;return a.listen(function(e){var a=d()("/main/:tabindex/0133/80/10/A/031/L/T/001/01/:paramobject/:encryptstr").exec(e.pathname);if(a){var r=t.__COMPARISON__&&t.__COMPARISON__(a);n({type:"init",routeParams:r})}})}},effects:{init:s.a.mark(function e(a,r){var i,c,o,l,p,d,f,_,m,b=r.select,h=r.put,y=r.call;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(function(t){return t.M01338010A031LT00101});case 2:return i=e.sent,c={validFlg:"1"},e.next=6,y(t.__GETCACHEDATA__,"M01338010A020LT00101",i,[]);case 6:return o=e.sent,l={},o?(l=n(o),l.currentPage=1,l.pageSize=o.currentPage*o.pageSize,l.pageStart=1,l.pageLength=o.currentPage*o.pageSize):l=n(i),p={typs:["BLOCKTYP","DISPLAYAREA","PRINTAREA"]},e.next=12,y(g.init,l,c,p);case 12:return d=e.sent,f=d.listData,_=d.dictTyps,m=u()(i.baseElements),m.salesId.componentOptions.options=_.SALES,e.next=19,h({type:"initComplete",data:{currentPage:f.currentPage,pageSize:f.pageSize,recordsTotal:f.recordsTotal,list:f.data,routeParams:a.routeParams,dictionaryData:_,baseElements:m},cacheData:o});case 19:case"end":return e.stop()}},e,this)}),queryList:s.a.mark(function t(e,a){var r,i,c,o=a.select,u=a.put,l=a.call;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(function(t){return t.M01338010A031LT00101});case 2:return r=t.sent,i=n(r),i.pageStart=1,i.pageLength=100,t.next=8,l(g.queryListConfigBlock,i);case 8:return c=t.sent,t.next=11,u({type:"queryListComplete",data:{pageStart:c.currentPage,currentPage:c.currentPage,pageLength:c.pageSize,pageSize:c.pageSize,recordsTotal:c.recordsTotal,list:c.data}});case 11:case"end":return t.stop()}},t,this)}),updatePosValidConfig:s.a.mark(function t(e,a){var n,r=e.params,i=(e.cb,a.select),c=a.put,o=a.call;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(function(t){return t.M01338010A031LT00101});case 2:return n=t.sent,t.next=5,o(g.updatePosValidConfigBlock,r);case 5:return t.next=7,c({type:"init",routeParams:n.routeParams});case 7:case"end":return t.stop()}},t,this)}),currentPageChange:s.a.mark(function t(e,a){var r,i,c,o,u=a.select,l=a.put,p=a.call;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(function(t){return t.M01338010A031LT00101});case 2:return r=t.sent,i=n(r),i=Object.assign({},i,e.paramdata),t.next=7,p(g.queryListConfigBlock,i);case 7:return c=t.sent,o=Object.assign([],r.list),r.currentPage>c.currentPage?o.unshift.apply(o,c.data):o.push.apply(o,c.data),t.next=12,l({type:"queryListComplete",data:{currentPage:c.currentPage,pageSize:c.pageSize,recordsTotal:c.recordsTotal,list:o}});case 12:case"end":return t.stop()}},t,this)}),confirmCbDispatch:s.a.mark(function t(e,a){var n=(a.select,a.put);a.call;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.confirm){t.next=3;break}return t.next=3,n({type:e.cbParams.cbDispatchTyp,params:e.cbParams.paramdata,successmessage:e.cbParams.successmessage});case 3:case"end":return t.stop()}},t,this)})},reducers:{updateBaseFormData:function(t,e){return Object.assign({},t,{baseFormData:Object.assign({},t.baseFormData,e.formData)})},updateRootStateProp:function(t,e){return Object.assign({},t,e.updateObj)},initComplete:function(t,e){return c()(e.cacheData)>0?Object.assign({},e.cacheData,{columnData:l.a.columnData,list:e.data.list,recordsTotal:e.data.recordsTotal,currentPage:e.data.currentPage,pageSize:e.data.pageSize}):Object.assign({},t,e.data)},queryListComplete:function(t,e){return Object.assign({},t,e.data)}}};e.default=_}.call(e,a(16))},2274:function(t,e,a){"use strict";e.a={fastquery:"\u4ee3\u7801/\u540d\u79f0/....",status_all:"\u5168\u90e8",status_valid:"\u6709\u6548",status_invalid:"\u65e0\u6548",operation:"\u64cd\u4f5c",edit:"\u7f16\u8f91",void:"\u4f5c\u5e9f",recover:"\u6062\u590d",new:"\u65b0\u5efa",batchInvalid:"\u6279\u91cf\u65e0\u6548",total:"\u603b\u5171",item:"\u6761",query:"\u67e5\u8be2",salesId:"\u9500\u552e\u70b9",sales_id:"\u9500\u552e\u70b9",block_cd:"\u4ee3\u7801",block_nm:"\u540d\u79f0",block_typ:"\u684c\u53f0\u7c7b\u578b",block_flg:"\u684c\u53f0\u5c5e\u6027",seat_quant:"\u5ea7\u4f4d\u6570",display_area_nm:"\u663e\u793a\u533a\u57df",print_area:"\u6253\u5370\u533a\u57df",display_flg:"\u662f\u5426\u663e\u793a",interim_flg:"\u662f\u5426\u4e34\u65f6",block_seq:"\u6392\u5e8f\u53f7",status_flg:"\u662f\u5426\u6709\u6548",status_flg_0:"\u684c\u53f0",status_flg_1:"\u5305\u95f4",status_flg_2:"\u4f1a\u8bae\u5ba4",status_flg_3:"\u624b\u724c",status_flg_4:"\u8ba1\u65f6\u5385\u623f",status_flg_5:"KTV\u5305\u623f",status_flg_6:"\u591a\u529f\u80fd\u5385",status_flg_7:"\u5ba2\u623f",no:"\u5426",yes:"\u662f",successmessage:"\u64cd\u4f5c\u6210\u529f",noCheckedMessage:"\u8bf7\u9009\u62e9\u65e0\u6548\u6570\u636e"}},3113:function(t,e,a){"use strict";var n=a(2274),r=a(3114);e.a={rightOperTop:{},rightOperCenter:{new:{text:n.a.new,className:"icon20 img50",permsCode:r.a[33200008],keyboard:"GF16"},batchInvalid:{text:n.a.batchInvalid,className:"icon20 img48",permsCode:r.a[33200009],keyboard:"GF18"}},rightOperBottom:{},baseElements:{fastquery:{type:"input",width:3,componentOptions:{text:"",placeholder:n.a.fastquery}},salesId:{type:"select",width:3,componentOptions:{text:n.a.salesId,selection:!0}},status_all:{type:"checkbox",componentOptions:{label:n.a.status_all,radio:!0}},status_valid:{type:"checkbox",componentOptions:{label:n.a.status_valid,radio:!0}},status_invalid:{type:"checkbox",componentOptions:{label:n.a.status_invalid,radio:!0}}},baseFormData:{fastquery:"",status_flg:"1"},columnData:[{title:n.a.sales_id,field:"sales_id",width:"10%"},{title:n.a.block_cd,field:"block_cd",width:"8%"},{title:n.a.block_nm,field:"block_nm",width:"8%"},{title:n.a.block_typ,field:"block_typ",width:"8%"},{title:n.a.block_flg,field:"block_flg",width:"8%",template:function(t){return{toolTipText:n.a["status_flg_"+t.text],content:n.a["status_flg_"+t.text]}}},{title:n.a.seat_quant,field:"seat_quant",width:"8%"},{title:n.a.display_area_nm,field:"display_area_nm",width:"10%"},{title:n.a.print_area,field:"print_area",width:"10%"},{title:n.a.display_flg,field:"display_flg",width:"8%",template:function(t){var e=n.a.yes,a=n.a.no;return"1"===t.datasource.display_flg?{toolTipText:e,content:e}:{toolTipText:a,content:a}}},{title:n.a.interim_flg,field:"interim_flg",width:"8%",template:function(t){var e=n.a.yes,a=n.a.no;return"1"===t.datasource.interim_flg?{toolTipText:e,content:e}:{toolTipText:a,content:a}}},{title:n.a.block_seq,field:"block_seq",width:"6%"},{title:n.a.status_flg,field:"status_flg",width:"8%",template:function(t){var e=n.a.status_valid,a=n.a.status_invalid;return"1"===t.datasource.valid_flg?{toolTipText:e,content:e}:{toolTipText:a,content:a}}}],dataIdentityPropName:"block_id",setFor:"block",checkedData:[],currentPage:1,pageSize:30,recordsTotal:0,list:[],dictionaryData:{},routeParams:{},permsData:r.a}},3114:function(t,e,a){"use strict";e.a={33200008:["33200008","33200008G","33200008H"],33200009:["33200009","33200009G","33200009H"]}},3115:function(t,e,a){"use strict";function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){function n(r,s){try{var i=e[r](s),c=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(c).then(function(t){n("next",t)},function(t){n("throw",t)});t(c)}return n("next")})}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",function(){return l});var s=a(36),i=a.n(s),c=a(257),o=a(260),u=a(487),l=(new u.a,function t(){var e=this;r(this,t),this.init=function(){var t=n(i.a.mark(function t(a,n,r){var s,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.queryListConfigBlock(a),e.querylistSalesFront(n),e.queryPosParamByTypAndSalerList(r)]);case 2:return s=t.sent,console.log("resultData",s),c={},c.SALES=Object(o.b)(s[1].data,["salescd","salesnm"],"salesid"),c.BLOCKTYP=Object(o.b)(s[2].responseData.BLOCKTYP,["param_drpt"],"param_id"),c.PRINTAREA=Object(o.b)(s[2].responseData.PRINTAREA,["param_drpt"],"param_id"),t.abrupt("return",{listData:s[0],dictTyps:c});case 9:case"end":return t.stop()}},t,e)}));return function(e,a,n){return t.apply(this,arguments)}}(),this.queryListConfigBlock=function(){var t=n(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)("/bs/3310010/PosBlock/listGetConfigBlock","get",a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.updatePosValidConfigBlock=function(){var t=n(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)("/bs/3310010/PosBlock/savePosValidConfigBlock","post",a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.querylistConfigBlockById=function(){var t=n(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)("/bs/3310010/PosBlock/listGetConfigBlockById","get",a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.querylistSalesFront=function(){var t=n(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)("/bs/3310010/PosSales/listGetSalesFront","get",a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.queryPosParamByTypAndSalerList=function(){var t=n(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)("/bs/Dictionary/getPosParamByTypAndSalerList","get",a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()})}});