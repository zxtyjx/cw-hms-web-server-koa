webpackJsonp([319],{1727:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var n=r(38),a=r.n(n),c=r(111),o=r.n(c),s=r(264),d=r.n(s),i=r(82),u=r.n(i),p=r(30),l=r.n(p),D=r(18),g=r.n(D),f=r(256),h=r.n(f),I=r(22),b=r.n(I),m=r(167),v=r.n(m),y=r(2953),C=r(491),S=r.n(C),P=r(2097),U=r(1933),k=new P.a,x={namespace:"M01328040A070LT00101",state:y.a,subscriptions:{historyListenEvent:function(e){var r=e.history,n=e.dispatch;return r.listen(function(e){var r=S()("/main/:tabindex/0132/80/40/A/070/L/T/001/01/:paramobject/:encryptstr").exec(e.pathname);if(r){var a=t.__COMPARISON__&&t.__COMPARISON__(r);n({type:"init",routeParams:a})}})}},effects:{init:a.a.mark(function e(r,n){var c,o,s,d,i,u,p,l,D,g,f=n.select,h=n.put,I=n.call;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c={dictypes:["PARA_TRNCODE"]},e.next=3,f(function(t){return t.M01328040A070LT00101});case 3:return o=e.sent,e.next=6,I(k.init,{},{},c);case 6:return s=e.sent,d=s.goodsClsDetailDto,i=s.goodsProductDto,u=s.dictData,p=O(d),l=R(i),D=void 0,D=v()(u,function(t){return"140"==t["data-datasource"].trn_typ}),e.next=16,I(t.__GETCACHEDATA__,"M01328040A070LT00101");case 16:return g=e.sent,e.next=19,h({type:"initComplete",data:Object.assign({},y.a,{dictData:D,rountingBase:d,TreeData:p,ProductDto:l,routeParams:r.routeParams}),cacheData:g});case 19:case"end":return e.stop()}},e,this)}),updataGrpFinBaseGoodsWithProductDetail:a.a.mark(function t(e,r){var n,c,o,s=r.select,d=r.put,i=r.call;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(function(t){return t});case 2:return n=t.sent,c={displayData:n,originData:{},submitData:e.postParams.submitData},t.next=6,i(k.saveGrpFinBaseGoodsWithProductDetail,c);case 6:return o=t.sent,e.saveSuccess(),t.next=10,d({type:"updataSaveComplete"});case 10:case"end":return t.stop()}},t,this)})},reducers:{updataSaveComplete:function(t,e){return Object.assign({},t,{checkedKeys:[],currentSelectData:{tree:[],pageSelectData:[]}})},initComplete:function(t,e){return b()(e.cacheData)>0?Object.assign({},e.cacheData):Object.assign({},t,e.data)},updateFormData:function(t,e){return Object.assign({},t,{editPriceformData:Object.assign({},t.editPriceformData,e.editPriceformData)})},selectTreeData:function(t,e){var r=(h()(t.currentSelectData),h()(e.trncdIds)),n=[],a=h()(t.TreeData);return g()(a,function(t,e){b()(t.children)>0&&g()(t.children,function(t,e){b()(t.children)>0&&g()(t.children,function(t,e){l()(r,t.key)&&n.push(t.goodsId)})})}),Object.assign({},t,{checkedKeys:j(e.trncdIds),currentSelectData:Object.assign({},t.currentSelectData,{tree:n})})},updatestrQuery:function(t,e){return Object.assign({},t,{strQuery:e.strQuery})},searchProduct:function(t,e){var r=h()(t.TreeData),n=t.strQuery,a=G(n,r,t);return Object.assign({},t,{TreeData:a})},selectProData:function(t,e){var r=(e.productId,h()(t.ProductDto),h()(t.currentSelectData)),n=r.pageSelectData;if("add"===e.Operation?b()(n)>0?g()(n,function(t,r){e.productId===t.productId?t.trncdIds.push(e.trncdIds):n.push({productId:e.productId,trncdIds:[e.trncdIds]})}):n.push({productId:e.productId,trncdIds:[e.trncdIds]}):g()(n,function(t,r){if(e.productId===t.productId){var n=u()(t.trncdIds,function(t){return t===e.trncdIds});t.trncdIds.splice(n,1)}}),b()(n)>0)for(var a=n.length-1;a>=0;a--)0===b()(n[a].trncdIds)&&n.splice(a,1);return Object.assign({},t,{currentSelectData:Object.assign({},t.currentSelectData,{pageSelectData:n})})},deleSelectGoods:function(t,e){var r=h()(t.ProductDto),n=h()(t.currentSelectData),a=n.pageSelectData,c=e.productId,o=u()(r,function(t){return c==t.productId}),s=u()(a,function(t){return c==t.productId});if("1"==r[o].typCRUD)for(var d=r[o].checkboxlist.length-1;d>=0;d--)l()(e.trncdIds,r[o].checkboxlist[d].Value)&&r[o].checkboxlist.splice(d,1);else for(var i=r[o].checkboxlist.length-1;i>=0;i--)l()(e.trncdIds,r[o].checkboxlist[i].Value)&&("1"==r[o].checkboxlist[i].typCRUD?r[o].checkboxlist.splice(i,1):(r[o].typCRUD="3",r[o].checkboxlist[i].typCRUD="4"));if(-1!=s){for(var p=a[s].trncdIds.length-1;p>=0;p--)l()(e.trncdIds,a[s].trncdIds[p])&&a[s].trncdIds.splice(p,1);for(var D=a.length-1;D>=0;D--)0==a[D].trncdIds.length&&a.splice(D,1)}return Object.assign({},t,{ProductDto:r,currentSelectData:Object.assign({},t.currentSelectData,{pageSelectData:a})})},recoverProduct:function(t,e){var r=h()(t.ProductDto),n=e.id,a=u()(r,function(t){return n==t.productId});return"1"!=r[a].typCRUD&&(r[a].typCRUD="3"),r[a].statusFlg="1",Object.assign({},t,{ProductDto:r})},deleteAlldata:function(t,e){var r=h()(t.ProductDto),n=e.productId,a=u()(r,function(t){return n==t.productId});return"1"!=r[a].typCRUD&&(r[a].typCRUD="3"),r[a].statusFlg="0",Object.assign({},t,{ProductDto:r})},selectAllData:function(t,e){var r=h()(t.currentSelectData);if("add"==e.Operation)if(b()(r.pageSelectData)>0){var n=u()(r.pageSelectData,function(t){return t.productId==e.productId});-1!==n?r.pageSelectData[n].trncdIds=d()(r.pageSelectData.trncdIds,e.trncdIds):r.pageSelectData.push({productId:e.productId,trncdIds:e.trncdIds})}else r.pageSelectData.push({productId:e.productId,trncdIds:e.trncdIds});else r.pageSelectData=v()(r.pageSelectData,function(t){return e.productId!=t.productId}),r.pageSelectData||(r.pageSelectData=[]);if(b()(r.pageSelectData)>0)for(var a=r.pageSelectData.length-1;a>=0;a--)0==b()(r.pageSelectData[a].trncdIds)&&r.pageSelectData.splice(a,1);return Object.assign({},t,{currentSelectData:Object.assign({},t.currentSelectData,{pageSelectData:r.pageSelectData})})},currentSelectDataAddto:function(t,e){var r=e.id,n=h()(t.ProductDto),a=h()(t.currentSelectData),c=a.tree,o=a.pageSelectData,s=h()(t.TreeData),d=u()(n,function(t){return t.productId==r});return b()(c)>0&&g()(s,function(t,e){b()(t.children)>0&&g()(t.children,function(t,e){b()(t.children)>0&&g()(t.children,function(t,e){l()(c,t.goodsId)&&("1"!=n[d].typCRUD&&(n[d].typCRUD="3"),n[d].checkboxlist.push({buttonList:{edit:{name:"img30"},del:{name:"img34_1"}},className:"checkbox-bkground",stdQuant:t.stdQuant,goodsDrpt:t.goodsDrpt,salePrice:t.suggestPrice,goodsUnitId:t.goodsUnitId,goodsUnitDrpt:t.goodsUnitDrpt,goodsId:t.goodsId,label:t.goodsDrpt+", "+Object(U.a)(t.suggestPrice)+", "+t.goodsUnitDrpt,Value:t.goodsId,id:null,Name:"",typCRUD:"1"}))})})}),b()(o)>0&&g()(o,function(t,e){var r=u()(n,function(e){return e.productId==t.productId});g()(n[r].checkboxlist,function(e,r){if(l()(t.trncdIds,e.Value)){"1"!=n[d].typCRUD&&(n[d].typCRUD="3");var a=Object.assign({},e,{id:null,typCRUD:"1"});n[d].checkboxlist.push(a)}})}),Object.assign({},t,{checkedKeys:[],ProductDto:n,currentSelectData:{tree:[],pageSelectData:[]}})},updataprice:function(t,e){var r=e.params.productId,n=h()(t.ProductDto),a=u()(n,function(t){return r==t.productId});if(-1!==a)if("1"==n[a].typCRUD){var c=n[a].checkboxlist.map(function(t){return t.Value==e.params.goodsid&&(t.salePrice=e.params.price,t.label=t.goodsDrpt+", "+Object(U.a)(e.params.price)+", "+t.goodsUnitDrpt),t.typCRUD="1"===t.typCRUD?"1":"3",t});n[a].checkboxlist=c,n[a].typCRUD="1"===n[a].typCRUD?"1":"3"}else{var o=n[a].checkboxlist.map(function(t){return t.Value==e.params.goodsid&&(t.salePrice=e.params.price,t.label=t.goodsDrpt+", "+Object(U.a)(e.params.price)+", "+t.goodsUnitDrpt),t.typCRUD="1"===t.typCRUD?"1":"3",t});n[a].checkboxlist=o,n[a].typCRUD="1"===n[a].typCRUD?"1":"3"}return Object.assign({},t,{ProductDto:n})},saveshopdata:function(t,e){var r=o()(t.ProductDto),n=o()(t.TreeData),a=o()(t.currentSelectData),c=a.tree,s=a.pageSelectData,d={checkboxlist:[],seq:e.params.seq||0,productCd:e.params.productCd,productId:null,productDrpt:e.params.productDrpt,auditTrncdId:e.params.auditTrncdId,trncdDrpt:e.params.trncdDrpt,statusFlg:"1",id:null,typCRUD:1,version:null};return b()(c)>0&&g()(n,function(t,e){b()(t.children)>0&&g()(t.children,function(t,e){b()(t.children)>0&&g()(t.children,function(t,e){l()(c,t.goodsId)&&d.checkboxlist.push({buttonList:{edit:{name:"img30"},del:{name:"img34_1"}},className:"checkbox-bkground",stdQuant:t.stdQuant,goodsDrpt:t.name.split(",")[0],salePrice:t.suggestPrice,goodsUnitId:t.goodsUnitId,goodsUnitDrpt:t.goodsUnitDrpt,goodsId:t.goodsId,label:t.name.split(",")[0]+", "+Object(U.a)(t.suggestPrice)+", "+t.goodsUnitDrpt,Value:t.goodsId,id:null,Name:"",typCRUD:"1"})})})}),b()(s)>0&&g()(s,function(t,e){var n=u()(r,function(e){return e.productId==t.productId});g()(r[n].checkboxlist,function(e,r){if(l()(t.trncdIds,e.Value)){var n=Object.assign({},e,{id:null,typCRUD:"1"});d.checkboxlist.push(n)}})}),r.push(d),Object.assign({},t,{checkedKeys:[],ProductDto:r,currentSelectData:{pageSelectData:[],tree:[]}})},updateInfo:function(t,e){var r=h()(t.ProductDto),n=[],a=void 0;return g()(r,function(t,r){a=t.productId==e.submitData.editId?{checkboxlist:t.checkboxlist,seq:e.submitData.seq||0,productCd:e.submitData.productCd,productId:t.productId,productDrpt:e.submitData.productDrpt,auditTrncdId:e.submitData.auditTrncdId,trncdDrpt:e.submitData.trncdDrpt,id:t.id?t.id:null,statusFlg:t.statusFlg,typCRUD:t.id?"3":"1",version:t.version}:{checkboxlist:t.checkboxlist,seq:t.seq||0,productCd:t.productCd,productId:t.productId,productDrpt:t.productDrpt,auditTrncdId:t.auditTrncdId,trncdDrpt:t.trncdDrpt,id:t.id,statusFlg:t.statusFlg,typCRUD:t.typCRUD,version:t.version},n.push(a)}),Object.assign({},t,{ProductDto:n})}}},O=function(t){var e=[];return b()(t)>0&&g()(t,function(t,r){var n={key:t.goodsClsId,name:t.goodsClsdrpt,children:[]},a=t.goodsSubClsDetailDto;b()(a)>0&&g()(a,function(e,r){var a={goodsSubClsId:t.goodsSubClsId,key:Number(""+t.goodsClsId+e.goodsSubClsId),name:""+e.goodsSubClsDrpt,children:[]},c=e.goodsDetailDto;b()(c)>0&&g()(c,function(t,r){a.children.push({goodsUnitId:t.goodsUnitId,goodsUnitDrpt:t.goodsUnitDrpt,goodsSpec:t.goodsSpec,goodsDrpt:t.goodsDrpt,goodsId:t.goodsId,key:Number(""+e.goodsSubClsId+t.goodsId),name:t.goodsDrpt+", "+t.goodsUnitDrpt+", "+t.goodsSpec,stdQuant:t.stdQuant,suggestPrice:t.suggestPrice,id:t.id})}),n.children.push(a)}),e.push(n)}),e},R=function(t){var e=[];return g()(t,function(t,r){var n={checkboxlist:[],seq:t.seq,productCd:t.productCd,productId:t.productId,productDrpt:t.productDrpt,auditTrncdId:t.auditTrncdId,trncdDrpt:t.trncdDrpt,id:t.id,statusFlg:t.statusFlg,typCRUD:"0",version:t.version};t.goodsDetailDto&&b()(t.goodsDetailDto)>0&&g()(t.goodsDetailDto,function(t,e){n.checkboxlist.push({buttonList:{edit:{name:"img30"},del:{name:"img34_1"}},className:"checkbox-bkground",stdQuant:t.stdQuant,goodsDrpt:t.goodsDrpt,salePrice:t.salePrice,goodsUnitId:t.goodsUnitId,goodsUnitDrpt:t.goodsUnitDrpt,goodsId:t.goodsId,label:t.goodsDrpt+", "+Object(U.a)(t.salePrice)+", "+t.goodsUnitDrpt,Value:t.goodsId,id:t.id,typCRUD:"0"})}),e.push(n)}),e},j=function(t){for(var e=[],r=0;r<t.length;r++)e.push(""+t[r]);return e},G=function(t,e,r){if(""===t)return O(r.rountingBase);var n=[];return b()(e)>0?(g()(e,function(e,r){var a=e.name;l()(a,t)&&n.push(e)}),g()(e,function(e,r){b()(e.children)>0&&g()(e.children,function(r,a){if(l()(r.name,t)){var c={key:e.key,name:e.name,children:[]};c.children.push(r),n.push(c)}})}),g()(e,function(e,r){b()(e.children)>0&&g()(e.children,function(r,a){var c=r.children;b()(c)>0&&g()(c,function(a,c){if(l()(a.name,t)){var o={key:e.key,name:e.name,children:[]},s={goodsSubClsId:r.goodsSubClsId,key:r.key,name:r.name,children:[]},d={goodsId:a.goodsId,goodsUnitId:a.goodsUnitId,goodsUnitDrpt:a.goodsUnitDrpt,goodsSpec:a.goodsSpec,goodsDrpt:a.goodsDrpt,key:a.key,name:a.name,stdQuant:a.stdQuant,suggestPrice:a.suggestPrice,id:a.id};s.children.push(d),o.children.push(s),n.push(o)}})})}),n):void 0};e.default=x}.call(e,r(15))},1933:function(t,e,r){"use strict";(function(t){r.d(e,"a",function(){return n});var n=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.__CURRENCY__.scale,n=arguments[2],a=arguments[3],c=arguments[4];e=e||0,r=isNaN(r=Math.abs(r))?2:r,n=void 0!==n?n:"",a=a||"",c=c||".";var o=e<0?"-":"",s=parseInt(e=Math.abs(+e||0).toFixed(r),10)+"",d=(d=s.length)>3?d%3:0;return n+o+(d?s.substr(0,d)+a:"")+s.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+a)+(r?c+Math.abs(e-s).toFixed(r).slice(2):"")}}).call(e,r(15))},2097:function(t,e,r){"use strict";function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function n(a,c){try{var o=e[a](c),s=o.value}catch(t){return void r(t)}if(!o.done)return Promise.resolve(s).then(function(t){n("next",t)},function(t){n("throw",t)});t(s)}return n("next")})}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",function(){return u});var c=r(38),o=r.n(c),s=r(257),d=(r(260),r(489)),i=new d.a,u=function t(){var e=this;a(this,t),this.init=function(){var t=n(o.a.mark(function t(r,n,a){var c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.queryGrpFinBaseGoodsDetailList(r),e.queryGrpFinBaseGoodsWithProductDetailLi(n),i.queryDictionary(a)]);case 2:return c=t.sent,t.abrupt("return",{goodsClsDetailDto:c[0].goodsClsDetailDto,goodsProductDto:c[1].goodsProductDto,dictData:c[2].PARA_TRNCODE});case 4:case"end":return t.stop()}},t,e)}));return function(e,r,n){return t.apply(this,arguments)}}(),this.queryGrpFinBaseGoodsDetailList=function(){var t=n(o.a.mark(function t(r){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.a)("/bs/3130010/GrpFinBaseGoods/queryGrpFinBaseGoodsDetailList","get",r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.queryGrpFinBaseGoodsWithProductDetailLi=function(){var t=n(o.a.mark(function t(r){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.a)("/bs/3130010/GrpFinBaseGoods/queryGrpFinBaseGoodsWithProductDetailList","get",r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.saveGrpFinBaseGoodsWithProductDetail=function(){var t=n(o.a.mark(function t(r){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.a)("/bs/3130010/GrpFinBaseGoods/saveGrpFinBaseGoodsWithProductDetail","post",r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()}},2098:function(t,e,r){"use strict";e.a={32805091:["32805091","32805091G","32805091H"],32805056:["32805056","32805056G","32805056H"]}},2953:function(t,e,r){"use strict";var n=r(639),a=r(2098);e.a={routeParams:{},rightOperTop:{save:{text:n.a.save,className:"icon32 img81",permsCode:a.a[32805056],keyboard:"GF08"}},rightOperCenter:{},rightOperBottom:{},editPriceElements:{price:{type:"input",width:16,interactionOptions:{isMust:!0,findCondition:"",autoFocus:"autofocus"},componentOptions:{checkType:"floatnzero",text:n.a.price}}},editPriceformData:{},strQuery:"",rountingBase:[],TreeData:[],ProductDto:[],checkedKeys:[],currentSelectData:{tree:[],pageSelectData:[]}}}});